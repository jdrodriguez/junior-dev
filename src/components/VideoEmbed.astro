---
interface Props {
  id: string;
  title: string;
  description?: string;
  duration?: string;
  creator?: string;
}
const { id, title, description, duration, creator } = Astro.props;
const videoId = id.includes('youtube.com') ? new URL(id).searchParams.get('v') || id : id;
---
<div class="video-embed">
  <div class="video-embed-player">
    <div class="video-embed-container">
      <iframe
        src={`https://www.youtube.com/embed/${videoId}`}
        title={title}
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen
        loading="lazy"
      ></iframe>
    </div>
    {duration && <span class="video-embed-badge">{duration}</span>}
  </div>
  <div class="video-embed-info">
    <div class="video-embed-title">{title}</div>
    {creator && (
      <div class="video-embed-creator">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="8" r="4" />
          <path d="M20 21a8 8 0 1 0-16 0" />
        </svg>
        {creator}
      </div>
    )}
    {description && <p class="video-embed-description">{description}</p>}
  </div>
</div>
